# ë¦¬íŒ©í„°ë§ 2íŒ: Javaë¡œ ë”°ë¼ê°€ëŠ” ì‹¤ìŠµ


## ë¦¬íŒ©í„°ë§
ë¦¬íŒ©í„°ë§ì— ëŒ€í•œ ì›ë¦¬ì™€ ì›ì¹™ì„ ì½ëŠ” ê²ƒë³´ë‹¤, ì˜ˆì‹œë¥¼ í†µí•´ ì§ì ‘ ë”°ë¼ê°€ë©° ë°°ìš°ëŠ” ê²ƒì´ ë” ì™€ë‹¿ì•˜ë‹¤. ì›ì¹™ì€ ë„ˆë¬´ ì¼ë°˜í™”ë˜ê¸° ì‰¬ì›Œ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ì ìš©í•´ì•¼ í• ì§€ ê°ì„ ì¡ê¸° ì–´ë µì§€ë§Œ, êµ¬ì²´ì ì¸ ì˜ˆì‹œê°€ ìˆìœ¼ë©´ "ì•„, ì´ë ‡ê²Œ í•˜ëŠ” ê±°êµ¬ë‚˜" í•˜ê³  ëª…í™•í•´ì§„ë‹¤.

ì´ í”„ë¡œì íŠ¸ëŠ” ë¦¬íŒ©í„°ë§ 2íŒì—ì„œ ì €ìê°€ ì„ ë³´ì´ëŠ” ê³¼ì •ì„ Javaë¡œ ì˜®ê²¨ì™€ ì‹¤ìŠµí•˜ë©° ë¦¬íŒ©í„°ë§ì˜ íë¦„ì„ ë”°ë¼ê°€ë³¸ ê²°ê³¼ë¬¼ì´ë‹¤. <br>
"ì–´ë–»ê²Œ, ë¬´ì—‡ì„, ì™œ"ë¼ëŠ” ì§ˆë¬¸ì— ì–½ë§¤ì´ê¸°ë³´ë‹¤ëŠ”, ì¼ë‹¨ ì‹¤ìŠµì„ í†µí•´ ì†ìœ¼ë¡œ ìµíˆëŠ” ë° ì´ˆì ì„ ë§ì·„ë‹¤. ì±…ì˜ JavaScript ì½”ë“œë¥¼ Javaë¡œ ë³€í™˜í•˜ë©´ì„œ, ê° ë‹¨ê³„ë³„ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•´ ë™ì‘ì„ í™•ì¸í–ˆë‹¤.

ì±…ì—ì„œ ë‹¤ë£¨ëŠ” ì˜ˆì œëŠ” ê°„ë‹¨í•œ í”„ë¡œê·¸ë¨ì´ë¼ ëª¨ë“  ë¦¬íŒ©í„°ë§ ê¸°ë²•ì„ ì „ë¶€ ì ìš©í•  í•„ìš”ëŠ” ì—†ì§€ë§Œ, ì´ ê³¼ì •ì„ í†µí•´ ë¦¬íŒ©í„°ë§ì˜ í•µì‹¬ ì•„ì´ë””ì–´ë¥¼ ì ìš©í•´ë³¼ ìˆ˜ ìˆì—ˆë‹¤.

<details> 
<summary><h3>ch1. ë¦¬íŒ©í„°ë§ ì²«ë²ˆì§¸ ì˜ˆì‹œ</h3></summary>
## ì‹œë‚˜ë¦¬ì˜¤
> ë‹¤ì–‘í•œ ì—°ê·¹ì„ ì™¸ì£¼ë¡œ ë°›ì•„ ê³µì—°í•˜ëŠ” **ê·¹ë‹¨**ì„ ë°°ê²½ìœ¼ë¡œ í•œë‹¤.

- ê° ê³µì—°ì€ ì¥ë¥´(`tragedy`, `comedy`)ì™€ ê´€ê° ìˆ˜ì— ë”°ë¼ **ë¹„ìš©**ì„ ì±…ì •í•œë‹¤.
- ê³ ê°ì—ê²ŒëŠ” **í¬ì¸íŠ¸**ë¥¼ ì§€ê¸‰í•˜ì—¬ ë‹¤ìŒ ê³µì—°ì—ì„œ **í• ì¸** í˜œíƒì„ ì œê³µí•œë‹¤.

### 1. ê³µì—° ìš”ì²­ ì²˜ë¦¬:
  - ê³ ê°ì´ ê³µì—°ì„ ìš”ì²­í•˜ë©´, ì—°ê·¹ì˜ ì¥ë¥´ì™€ ê´€ê° ê·œëª¨ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¹„ìš©ì„ ê³„ì‚°í•œë‹¤.
  - í˜„ì¬ ê·¹ë‹¨ì€ ë‘ ê°€ì§€ ì¥ë¥´(ë¹„ê·¹, í¬ê·¹)ë§Œ ê³µì—°í•œë‹¤.

### 2. ë¹„ìš© ì±…ì • ë¡œì§:
  - ë¹„ê·¹: ê¸°ë³¸ë£Œ $400 + ê´€ê° 30ëª… ì´ˆê³¼ ì‹œ ì¸ì›ë‹¹ $10 ì¶”ê°€.
  - í¬ê·¹: ê¸°ë³¸ë£Œ $300 + ê´€ê° 20ëª… ì´ˆê³¼ ì‹œ $100 + ì´ˆê³¼ ì¸ì›ë‹¹ $5 + ì „ì²´ ê´€ê° ìˆ˜ë‹¹ $3 ì¶”ê°€.

### 3. í¬ì¸íŠ¸ ì œë„:
  - ê³µì—°ë£Œì™€ ë³„ê°œë¡œ í¬ì¸íŠ¸ë¥¼ ì§€ê¸‰í•œë‹¤.
  - ê¸°ë³¸: ê´€ê° 30ëª… ì´ˆê³¼ ì‹œ ì´ˆê³¼ ì¸ì›ë§Œí¼ í¬ì¸íŠ¸ ì ë¦½.

### 4. í¬ê·¹ ì¶”ê°€: ê´€ê° 5ëª…ë‹¹ 1í¬ì¸íŠ¸ ì¶”ê°€.
  - í¬ì¸íŠ¸ëŠ” ë‹¤ìŒ ê³µì—° ì˜ë¢° ì‹œ í• ì¸ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### 5. ì²­êµ¬ì„œ ì¶œë ¥:
  - ê³ ê°ëª…, ê³µì—°ë³„ ë¹„ìš©, ì´ì•¡, ì ë¦½ í¬ì¸íŠ¸ë¥¼ í¬í•¨í•œ ì²­êµ¬ì„œë¥¼ ìƒì„±í•œë‹¤.

## ë¦¬íŒ©í„°ë§ ê³¼ì •
ì´ í”„ë¡œì íŠ¸ëŠ” ì±…ì˜ JavaScript ì½”ë“œë¥¼ Javaë¡œ ë³€í™˜í•˜ë©°, ë‹¨ê³„ë³„ë¡œ ë¦¬íŒ©í„°ë§ì„ ì ìš©í•œ ê²°ê³¼ë¥¼ ë³´ì—¬ì¤€ë‹¤.
ê° ë‹¨ê³„ëŠ” JUnit í…ŒìŠ¤íŠ¸ë¡œ ê²€ì¦ë˜ë©°, `@RefactoringStage` ì• ë„ˆí…Œì´ì…˜ì„ í™œìš©í•´ ë¦¬íŒ©í„°ë§ ë‹¨ê³„ë¥¼ êµ¬ë¶„í–ˆë‹¤.
ëª¨ë“  í…ŒìŠ¤íŠ¸ì— ë™ì¼í•œ ê²°ê³¼ë¥¼ ê²€ì¦í•  ìˆ˜ ìˆë„ë¡ `assertStatementContains(result)`ë¥¼ êµ¬ì„±í–ˆë‹¤.

### 1. ë¦¬íŒ©í„°ë§ ì „: ë‹¨ì¼ ë©”ì„œë“œì˜ ë³µì¡í•œ ë¡œì§
- íŒŒì¼: [`BaseStatementTest.statement()`](https://github.com/Almondshin/Refactoring2/blob/886ae00d2bc3019c3424cc718d6643b1fa47fa4f/src/test/java/org/refactoring/patterns/Refactoring2/BaseStatementTest.java#L59)
- íŠ¹ì§•: ëª¨ë“  ê³„ì‚°(ë¹„ìš©, í¬ì¸íŠ¸)ê³¼ ì¶œë ¥ í˜•ì‹ì´ í•˜ë‚˜ì˜ ë©”ì„œë“œì— ì–½í˜€ ìˆë‹¤.
- ë¬¸ì œì : ë¡œì§ì´ ë’¤ì—‰ì¼œ ìˆ˜ì •ì´ ì–´ë µê³ , ê°€ë…ì„±ì´ ë–¨ì–´ì§„ë‹¤.

### 2. 1ì°¨ ë¦¬íŒ©í„°ë§: ë©”ì„œë“œ ë¶„ë¦¬
- íŒŒì¼: [`BaseStatementTest.statementRefactored1()`](https://github.com/Almondshin/Refactoring2/blob/886ae00d2bc3019c3424cc718d6643b1fa47fa4f/src/test/java/org/refactoring/patterns/Refactoring2/BaseStatementTest.java#L114)
- ë³€ê²½ì :
    - amountFor: ê³µì—°ë³„ ë¹„ìš© ê³„ì‚° ë¶„ë¦¬.
    - volumeCreditsFor: í¬ì¸íŠ¸ ê³„ì‚° ë¶„ë¦¬.
    - totalAmount, totalVolumeCredits: í•©ê³„ ê³„ì‚° ë¶„ë¦¬.
- íš¨ê³¼: ë¡œì§ì´ ëª¨ë“ˆí™”ë˜ì–´ ê°€ë…ì„±ì´ ì¢‹ì•„ì§€ê³ , ê°œë³„ ê¸°ëŠ¥ ìˆ˜ì •ì´ ì‰¬ì›Œì¡Œë‹¤.

### 3. 2ì°¨ ë¦¬íŒ©í„°ë§: ë©”ì„œë“œ ë¶„ë¦¬
- íŒŒì¼: [`BaseStatementTest.statementRefactored2()`](https://github.com/Almondshin/Refactoring2/blob/886ae00d2bc3019c3424cc718d6643b1fa47fa4f/src/test/java/org/refactoring/patterns/Refactoring2/BaseStatementTest.java#L194)
- ë³€ê²½ì :
  - createStatementData: ë°ì´í„°ë¥¼ ì¤€ë¹„í•˜ëŠ” ê³„ì‚° ë‹¨ê³„ ë¶„ë¦¬.
  - renderPlainText: ì¶œë ¥ í˜•ì‹ì„ ë‹´ë‹¹.
  - EnrichedPerformance: ê³µì—°ë³„ ë°ì´í„°ë¥¼ êµ¬ì¡°í™”.
- íš¨ê³¼: ê³„ì‚° ë¡œì§ê³¼ ì¶œë ¥ í˜•ì‹ì´ ë…ë¦½ì ìœ¼ë¡œ êµ¬ì„±, ë‹¤ë¥¸ í¬ë§·ìœ¼ë¡œ í™•ì¥ì´ ì‰¬ì›Œì¡Œë‹¤.

### 4. 3ì°¨ ë¦¬íŒ©í„°ë§: ë‹¤í˜•ì„± í™œìš©
- íŒŒì¼: [`BaseStatementTest.statementRefactored3()`](https://github.com/Almondshin/Refactoring2/blob/886ae00d2bc3019c3424cc718d6643b1fa47fa4f/src/test/java/org/refactoring/patterns/Refactoring2/BaseStatementTest.java#L283)
- ë³€ê²½ì :
  - PerformanceCalculator ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ë„ì….
  - TragedyCalculator, ComedyCalculator ì„œë¸Œí´ë˜ìŠ¤ë¡œ ì¥ë¥´ë³„ ê³„ì‚° ë¶„ë¦¬.
- íš¨ê³¼: ìƒˆë¡œìš´ ì¥ë¥´ ì¶”ê°€ ì‹œ ì„œë¸Œí´ë˜ìŠ¤ë§Œ ë§Œë“¤ë©´ ë˜ë¯€ë¡œ í™•ì¥ì„±ì´ ë†’ì•„ì¡Œë‹¤.

## í”„ë¡œì íŠ¸ êµ¬ì¡°
- [`BaseStatementTest.java`](src/test/java/org/refactoring/patterns/Refactoring2/BaseStatementTest.java): ë¦¬íŒ©í„°ë§ ë‹¨ê³„ë³„ ë©”ì„œë“œì™€ í…ŒìŠ¤íŠ¸ í¬í•¨.
- [`RefactoringStage.java`](src/test/java/org/refactoring/patterns/Refactoring2/RefactoringStage.java): í…ŒìŠ¤íŠ¸ ë‹¨ê³„ êµ¬ë¶„ì„ ìœ„í•œ ì• ë„ˆí…Œì´ì…˜.
- [`RefactoringStageExtension.java`](src/test/java/org/refactoring/patterns/Refactoring2/RefactoringStageExtension.java): í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œê°„ ì¸¡ì • ë° ë‹¨ê³„ë³„ ë¡œê·¸ ì¶œë ¥.
- [`JavaScript ì›ë³¸`](src/test/javascript/org/refactoring/patterns/refactoring): refactoring1.js, refactoring2.js, refactoring3.js ë“±ìœ¼ë¡œ ê° ë‹¨ê³„ë³„ ì°¸ê³ .

## í”„ë¡œì íŠ¸ êµ¬ì„±

| íŒŒì¼ | ì„¤ëª… |
|------|------|
| [`BaseStatementTest.java`](src/test/java/org/refactoring/patterns/Refactoring2/BaseStatementTest.java) | ëª¨ë“  ë¦¬íŒ©í„°ë§ ë‹¨ê³„ êµ¬í˜„ ë° í…ŒìŠ¤íŠ¸ í¬í•¨ |
| [`RefactoringStage.java`](src/test/java/org/refactoring/patterns/Refactoring2/RefactoringStage.java) | ë¦¬íŒ©í„°ë§ ë‹¨ê³„ êµ¬ë¶„ìš© ì• ë…¸í…Œì´ì…˜ |
| [`RefactoringStageExtension.java`](src/test/java/org/refactoring/patterns/Refactoring2/RefactoringStageExtension.java) | í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œê°„ ì¸¡ì • ë° ë‹¨ê³„ ë¡œê·¸ ì¶œë ¥ |
| [`base.js`](src/test/javascript/org/refactoring/patterns/base.js) | ë¦¬íŒ©í† ë§ ì „ JS ë²„ì „|
| [`refactoring1.js`](src/test/javascript/org/refactoring/patterns/refactoring/refactoring1.js) | 1ë‹¨ê³„ JS ë²„ì „ |
| [`refactoring2.js`](src/test/javascript/org/refactoring/patterns/refactoring/refactoring2.js) | 2ë‹¨ê³„ JS ë²„ì „ |
| [`refactoring3.js`](src/test/javascript/org/refactoring/patterns/refactoring/refactoring3.js) | 3ë‹¨ê³„ JS ë²„ì „ |
| [`test.js`](src/test/javascript/org/refactoring/patterns/test.js) | JS ì „ì²´ í…ŒìŠ¤íŠ¸ |


```js
> Task :compileJava UP-TO-DATE
> Task :processResources UP-TO-DATE
> Task :classes UP-TO-DATE
> Task :compileTestJava UP-TO-DATE
> Task :processTestResources NO-SOURCE
> Task :testClasses UP-TO-DATE
=== Refactoring Step: "Before" Test Start ===

ë¦¬íŒ©í† ë§ ì „ ê²°ê³¼:
ì²­êµ¬ ë‚´ì—­ (ê³ ê°ëª…: BigCo)
Hamlet: $650.00 (55ì„)
As You Like It: $580.00 (35ì„)
Othello: $500.00 (40ì„)
ì´ì•¡: $1,730.00
ì ë¦½ í¬ì¸íŠ¸: 47ì 

ì‹¤í–‰ ì‹œê°„: 15ms
=== Refactoring Step : "Before" Test End ===
=== Refactoring Step: "Refactored1" Test Start ===

1ì°¨ ë¦¬íŒ©í† ë§ ê²°ê³¼:
ì²­êµ¬ ë‚´ì—­ (ê³ ê°ëª…: BigCo)
Hamlet: $650.00 (55ì„)
As You Like It: $580.00 (35ì„)
Othello: $500.00 (40ì„)
ì´ì•¡: $1,730.00
ì ë¦½ í¬ì¸íŠ¸: 47ì 

ì‹¤í–‰ ì‹œê°„: 1ms
=== Refactoring Step : "Refactored1" Test End ===
=== Refactoring Step: "Refactored2" Test Start ===

2ì°¨ ë¦¬íŒ©í† ë§ ê²°ê³¼:
ì²­êµ¬ ë‚´ì—­ (ê³ ê°ëª…: BigCo)
Hamlet: $650.00 (55ì„)
As You Like It: $580.00 (35ì„)
Othello: $500.00 (40ì„)
ì´ì•¡: $1,730.00
ì ë¦½ í¬ì¸íŠ¸: 47ì 

ì‹¤í–‰ ì‹œê°„: 5ms
=== Refactoring Step : "Refactored2" Test End ===
=== Refactoring Step: "CalculatorSubclass" Test Start ===

3ì°¨ ë¦¬íŒ©í† ë§ ê²°ê³¼:
ì²­êµ¬ ë‚´ì—­ (ê³ ê°ëª…: BigCo)
Hamlet: $650.00 (55ì„)
As You Like It: $580.00 (35ì„)
Othello: $500.00 (40ì„)
ì´ì•¡: $1,730.00
ì ë¦½ í¬ì¸íŠ¸: 47ì 

ì‹¤í–‰ ì‹œê°„: 1ms
=== Refactoring Step : "CalculatorSubclass" Test End ===
> Task :test
BUILD SUCCESSFUL in 2s
4 actionable tasks: 1 executed, 3 up-to-date
ì˜¤í›„ 8:27:14: Execution finished ':test --tests "org.refactoring.patterns.Refactoring2.BaseStatementTest"'.
```

</details>

<details> 
<summary><h3>ch4. í…ŒìŠ¤íŠ¸ êµ¬ì¶•í•˜ê¸°</h3></summary>

ë¦¬íŒ©í„°ë§ì„ ì œëŒ€ë¡œ í•˜ë ¤ë©´, í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ê°€ ë’·ë°”ì¹¨ ë˜ì–´ì•¼ í•œë‹¤.
ì¢‹ì€ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” ì¼ì€ ê°œë°œ íš¨ìœ¨ì„ ë†’ì—¬ì¤€ë‹¤.

> í…ŒìŠ¤íŠ¸ëŠ” ë‹¨ìˆœíˆ ë™ì‘ í™•ì¸ì„ ë„˜ì–´ì„œ,
> **"ë””ìì¸ ë°©í–¥ì„ ì¡ê³ , ë””ë²„ê¹… ì‹œê°„ì„ ì¤„ì´ë©°, íšŒê·€ ë²„ê·¸ë¥¼ ë°©ì§€"** í•˜ëŠ” ë° ë„ì›€ì„ ì¤€ë‹¤.


ìê°€ í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ê°€ì¹˜ <br>
- í˜„ì¬ ìƒí™©ì„ ë¹ ë¥´ê²Œ íŒŒì•…í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤€ë‹¤.
- ì„¤ê³„ì— ëŒ€í•œ ê³ ë¯¼ì„ êµ¬ì²´í™”í•  ìˆ˜ ìˆë‹¤.
- ëŒ€ë¶€ë¶„ì˜ ì‹œê°„ì„ ë””ë²„ê¹…ì´ ì•„ë‹Œ ê²€ì¦ì— ì§‘ì¤‘í•  ìˆ˜ ìˆë‹¤.

> ğŸ“Œ ëª¨ë“  í…ŒìŠ¤íŠ¸ëŠ” ì™„ì „íˆ ìë™í™”ë˜ì–´ì•¼ í•˜ë©°, ê²°ê³¼ê¹Œì§€ ìë™ìœ¼ë¡œ ê²€ì‚¬ë˜ê²Œ êµ¬ì„±í•´ì•¼ í•œë‹¤.

## íšŒê·€ ë²„ê·¸ ë°©ì§€

**íšŒê·€ ë²„ê·¸**ë€ ì´ì „ê¹Œì§€ ì˜ ì‘ë™í•˜ë˜ ê¸°ëŠ¥ì´ ë³€ê²½ í›„ ë¬¸ì œê°€ ìƒê¸°ëŠ” í˜„ìƒì´ë‹¤.  
ë¦¬íŒ©í„°ë§ì€ ì½”ë“œ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì´ë¯€ë¡œ, ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ í…ŒìŠ¤íŠ¸ê°€ ë°˜ë“œì‹œ í•„ìš”í•˜ë‹¤.

---

## í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ì˜ ë“±ì¥

- ì¼„íŠ¸ ë²¡ê³¼ ì—ë¦­ ê°ë§ˆëŠ” ìŠ¤ëª°í† í¬ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ë¥¼ Javaë¡œ í¬íŒ…í–ˆê³ ,  
  ê·¸ ê²°ê³¼ë¬¼ì´ ë°”ë¡œ **JUnit**ì´ë‹¤.

- JUnitì€ ìë°” ìƒíƒœê³„ì—ì„œ TDDì™€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì˜ í•µì‹¬ ë„êµ¬ë¡œ ìë¦¬ì¡ì•˜ë‹¤.


---

## í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ (TDD)

> í…ŒìŠ¤íŠ¸ â†’ ì½”ë“œ â†’ ë¦¬íŒ©í„°ë§ ìˆœì„œë¡œ ì§§ì€ ì£¼ê¸°ë¥¼ ë°˜ë³µí•˜ë©° ê°œë°œí•œë‹¤.

1. **í†µê³¼í•˜ì§€ ëª»í•  í…ŒìŠ¤íŠ¸ ì‘ì„±**

2. **í•´ë‹¹ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼ì‹œí‚¤ëŠ” ìµœì†Œí•œì˜ ì½”ë“œ ì‘ì„±**

3. **ì¤‘ë³µ ì œê±°, ë„¤ì´ë° ê°œì„  ë“± ë¦¬íŒ©í„°ë§ ì§„í–‰**


ì´ ì£¼ê¸°ë¥¼ ë°˜ë³µí•¨ìœ¼ë¡œì¨, ì½”ë“œ í’ˆì§ˆê³¼ ì•ˆì •ì„±ì„ ë™ì‹œì— í™•ë³´í•  ìˆ˜ ìˆë‹¤.

---

## ì‹¤ìŠµ ì˜ˆì œ ê°œìš”

ì´ë²ˆ ì¥ì—ì„œëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì½”ë“œë¡œ ë‹¤ìŒ ë‘ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤:

|í´ë˜ìŠ¤|ì„¤ëª…|
|---|---|
|`Producer`|ìƒì‚°ì í•œ ëª…ì„ í‘œí˜„|
|`Province`|ì§€ì—­ ì „ì²´ë¥¼ í‘œí˜„, ì—¬ëŸ¬ ìƒì‚°ìë¥¼ í¬í•¨|

- `Province` ê°ì²´ëŠ” JSON í˜•ì‹ì˜ ë°ì´í„°ë¡œë¶€í„° ìƒì„±ëœë‹¤.

- í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ìˆ˜ìµ, ìˆ˜ìš”, ì‰ì—¬ ìƒì‚°ëŸ‰ ë“± ë‹¤ì–‘í•œ ë¡œì§ì„ ê²€ì¦í•  ìˆ˜ ìˆë‹¤.


---

## í…ŒìŠ¤íŠ¸ ì‘ì„± ì›ì¹™

- **"ì‹¤íŒ¨í•´ì•¼ í•  ìƒí™©ì—ì„œëŠ” ë°˜ë“œì‹œ ì‹¤íŒ¨í•˜ê²Œ ë§Œë“¤ì–´ì•¼ í•œë‹¤."**

- ë¬¸ì œê°€ ìƒê¸¸ ê°€ëŠ¥ì„±ì´ ë†’ì€ **ê²½ê³„ ì¡°ê±´**ì€ ì§‘ì¤‘ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•´ì•¼ í•œë‹¤.

- **ë²„ê·¸ ë¦¬í¬íŠ¸ê°€ ë°œìƒí•˜ë©´**, í•´ë‹¹ ë²„ê·¸ë¥¼ ë“œëŸ¬ë‚´ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ê°€ì¥ ë¨¼ì € ì‘ì„±í•´ì•¼ í•œë‹¤.

- ì „ì²´ í…ŒìŠ¤íŠ¸ëŠ” **ìµœì†Œ í•˜ë£¨ 1íšŒ ì´ìƒ** ì‹¤í–‰í•˜ëŠ” ìŠµê´€ì„ ë“¤ì´ì.


---

## í…ŒìŠ¤íŠ¸ì˜ ëª©ì 

> í…ŒìŠ¤íŠ¸ëŠ” ì½”ë“œê°€ "ì •ìƒ ë™ì‘í•œë‹¤"ëŠ” ê²ƒì„ ë³´ì¥í•˜ë ¤ëŠ” ê²Œ ì•„ë‹ˆë‹¤.  
> ì˜¤íˆë ¤ **"ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆëŠ” ì§€ì "ì„ ë¹ ë¥´ê²Œ íŒŒì•…í•˜ê¸° ìœ„í•œ ë„êµ¬**ë‹¤.

- ì¦‰, **ìœ„í—˜ìš”ì†Œ ì¤‘ì‹¬ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ êµ¬ì„±**í•´ì•¼ í•œë‹¤.

- í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ê°€ ë†’ë‹¤ê³  í•´ì„œ ë¬´ì¡°ê±´ ì¢‹ì€ ê²ƒì€ ì•„ë‹ˆë‹¤.

  - ì»¤ë²„ë¦¬ì§€ë³´ë‹¤ **ì˜ë„ëœ ì‹¤íŒ¨ ì¼€ì´ìŠ¤ë¥¼ ì¡ëŠ” í˜**ì´ ì¤‘ìš”í•˜ë‹¤.



</details>


<details>
<summary><h3>ch6. ê¸°ë³¸ì ì¸ ë¦¬íŒ©í† ë§ ê¸°ë²•</h3></summary>

> ë¦¬íŒ©í„°ë§ì˜ í•µì‹¬ì€ **ì‘ì€ ìŠ¤í…**ìœ¼ë¡œ ì§„í–‰í•˜ë©°, í…ŒìŠ¤íŠ¸ë¡œ ê¸°ëŠ¥ ë³€í™”ê°€ ì—†ìŒì„ í™•ì¸í•˜ëŠ” ê²ƒì´ë‹¤.

## ì£¼ìš” ë¦¬íŒ©í† ë§ ê¸°ë²•

###  ë³€ìˆ˜ ìº¡ìŠí™”
- **ì„¤ëª…**: ë³€ìˆ˜ì— ì§ì ‘ ì ‘ê·¼í•˜ëŠ” ëŒ€ì‹  getter/setterë¥¼ í†µí•´ ìº¡ìŠí™”í•˜ì—¬ ë‚´ë¶€ ìƒíƒœë¥¼ ë³´í˜¸í•˜ê³ , ì ‘ê·¼ ì œì–´ë¥¼ ê°•í™”í•œë‹¤. getterê°€ **ë³µì œë³¸ì„ ë°˜í™˜**í•˜ë©´ ë¶ˆë³€ì„±ì„ ë³´ì¥í•´ ìŠ¤ë ˆë“œ ì•ˆì „ì„±ê³¼ ì˜ˆì¸¡ ê°€ëŠ¥ì„±ì„ ë†’ì¸ë‹¤.
- **ì˜ˆì œ**:
  ```java
  public class Order {
      private List<String> items = new ArrayList<>();

      // ë³µì œë³¸ ë°˜í™˜ìœ¼ë¡œ ë¶ˆë³€ì„± ë³´ì¥
      public List<String> getItems() {
          return new ArrayList<>(items); // ë°©ì–´ì  ë³µì‚¬
          // ë˜ëŠ” return Collections.unmodifiableList(items); // ì½ê¸° ì „ìš© ë˜í¼
      }

      public void addItem(String item) {
          items.add(item);
      }
  }
  ```
  ```java
  // DTOë¡œ ë¶ˆë³€ ê°ì²´ ì„¤ê³„
  public record OrderDTO(String id, List<String> items) {
      public OrderDTO {
          items = List.copyOf(items); // ë¶ˆë³€ ì»¬ë ‰ì…˜
      }
  }
  ```
- **ì‹¤ë¬´ ê´€ì **:
  - **ì¥ì **: ë³µì œë³¸ì„ ë°˜í™˜í•˜ë©´ ê°ì²´ ë‚´ë¶€ ìƒíƒœê°€ ì™¸ë¶€ì—ì„œ ë°”ë€ŒëŠ” ê±¸ ë§‰ì„ ìˆ˜ ìˆì–´ì„œ, ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì´ë‚˜ ìºì‹œì²˜ëŸ¼ ê³µìœ ë˜ëŠ” ë°ì´í„°ì—ì„œëŠ” ì•ˆì •ì„± ì¸¡ë©´ì—ì„œ ìœ ë¦¬í•¨. ë„ë©”ì¸ ì„¤ê³„ì—ì„œë„ ê°’ ìì²´ê°€ ë°”ë€Œë©´ ì•ˆ ë˜ëŠ” ìƒí™©(ì˜ˆ: ê¸ˆìœµ, ì¸ì¦ í† í° ë“±)ì— ì˜ ë§ìŒ.
  - **ë‹¨ì **: ë¬´ì¡°ê±´ ë³µì œí•˜ë©´ ì„±ëŠ¥ ë¶€ë‹´ ìƒê¹€. íŠ¹íˆ ëŒ€ìš©ëŸ‰ ì»¬ë ‰ì…˜ì„ ë§¤ë²ˆ ë³µì‚¬í•˜ê²Œ ë˜ë©´ GC ì••ë°•ë„ ì»¤ì§€ê³ , ë¶ˆí•„ìš”í•œ ì˜¤ë¸Œì íŠ¸ ìƒì„±ì„ ìœ ë°œí•´ì„œ ì˜¤íˆë ¤ ë³‘ëª©ì´ ìƒê¸°ê¸°ë„ í•¨. ê·¸ë˜ì„œ ëŒ€ë¶€ë¶„ì˜ REST API ì„œë²„ì²˜ëŸ¼ ìš”ì²­-ì‘ë‹µ ë‹¨ìœ„ íŠ¸ëœì­ì…˜ì´ ì§§ê³ , ê³µìœ  ìƒíƒœê°€ ê±°ì˜ ì—†ëŠ” êµ¬ì¡°ì—ì„œëŠ” êµ³ì´ ë³µì œë³¸ ì•ˆ ì“°ëŠ” ê²Œ ë³´í†µì„.
  - **ì ìš© ê¸°ì¤€**: ì»¬ë ‰ì…˜(List, Map)ì„ ë°˜í™˜í•  ë• ì™¸ë¶€ì—ì„œ ìˆ˜ì •ë  ê°€ëŠ¥ì„±ì„ ì°¨ë‹¨í•˜ë ¤ê³  Collections.unmodifiableList()ë‚˜ ë³µì‚¬ë³¸ ë°˜í™˜í•˜ëŠ” ê²½ìš°ê°€ ë§ìŒ. ë°˜ë©´ì— ë„ë©”ì¸ ê°ì²´ëŠ” ì• ì´ˆì— ë¶ˆë³€ìœ¼ë¡œ ì„¤ê³„í•˜ëŠ” ê²Œ ì¼ë°˜ì ì´ë¼ recordë‚˜ Lombokì˜ @Value ê°™ì€ ê±¸ë¡œ ì²˜ë¦¬í•¨.
    ```java
    @Service
    public class UserService {
        public UserDTO getUser(String id) {
            User user = userRepository.findById(id).orElseThrow();
            return new UserDTO(user.getId(), user.getName()); // ë³µì‚¬ë³¸ ë°˜í™˜
        }
    }
    ```
  - **íŒ**: ë³µì œí• ì§€ ë§ì§€ëŠ” íŒ€ ì»¨ë²¤ì…˜ìœ¼ë¡œ ì •í•´ë‘ëŠ” ê²Œ ì¢‹ìŒ. ì˜ˆ: "ì»¬ë ‰ì…˜ì€ ë¬´ì¡°ê±´ ë¶ˆë³€ ë˜í¼ë¡œ ê°ì‹¸ê¸°"ì²˜ëŸ¼ ë£°ì„ ì •í•´ë‘ë©´ í˜¼ì„  ì¤„ì¼ ìˆ˜ ìˆìŒ. ê·¸ë¦¬ê³  ì§„ì§œ ë¯¼ê°í•œ ê²½ìš°ì—” JMeter ê°™ì€ ê±¸ë¡œ ì„±ëŠ¥ ì²´í¬í•´ì„œ ê²°ì •í•˜ëŠ” ê²Œ ì•ˆì •ì .

### ë§¤ê°œë³€ìˆ˜ ê°ì²´ ë§Œë“¤ê¸°
- **ì„¤ëª…**: ê´€ë ¨ ìˆëŠ” ì—¬ëŸ¬ ê°œì˜ íŒŒë¼ë¯¸í„°(ì˜ˆ: startDate, endDate, customerId)ë¥¼ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ë¬¶ì–´ì„œ ê°€ë…ì„± ë†’ì´ê³ , ê²€ì¦ ë¡œì§ë„ ê°™ì´ ë‹´ì•„ì„œ ì¬ì‚¬ìš©ì„±ê³¼ ì•ˆì •ì„± ì±™ê¸°ëŠ” ë°©ì‹. íŠ¹íˆ íŒŒë¼ë¯¸í„°ê°€ 3ê°œ ì´ìƒ ë„˜ì–´ê°€ë©´ ê°ì²´ë¡œ ë§Œë“œëŠ”ê²ƒì„ ì¶”ì²œ
- **ì˜ˆì œ**:
  ```java
  // ë¦¬íŒ©í„°ë§ ì „
  public BigDecimal calculateInvoice(LocalDate startDate, LocalDate endDate, String customerId) {
      // ê³„ì‚° ë¡œì§
      return BigDecimal.ZERO;
  }

  // ë¦¬íŒ©í„°ë§ í›„: ë§¤ê°œë³€ìˆ˜ ê°ì²´ ì‚¬ìš©
  public record InvoiceParameters(LocalDate startDate, LocalDate endDate, String customerId) {
      public InvoiceParameters {
          Objects.requireNonNull(startDate, "startDate must not be null");
          Objects.requireNonNull(endDate, "endDate must not be null");
          Objects.requireNonNull(customerId, "customerId must not be null");
      }
  }

  public BigDecimal calculateInvoice(InvoiceParameters params) {
      // ê³„ì‚° ë¡œì§
      return BigDecimal.ZERO;
  }
  ```
  ```java
  public record CreateOrderRequest(String customerId, LocalDate orderDate, BigDecimal amount) {
      public CreateOrderRequest {
          Objects.requireNonNull(customerId, "customerId must not be null");
          Objects.requireNonNull(orderDate, "orderDate must not be null");
          Objects.requireNonNull(amount, "amount must not be null");
      }
  }

  @RestController
  public class OrderController {
      @PostMapping("/orders")
      public ResponseEntity<?> createOrder(@RequestBody CreateOrderRequest request) {
          // ì£¼ë¬¸ ì²˜ë¦¬
          return ResponseEntity.ok().build();
      }
  }
  ```
- **ì‹¤ë¬´ ê´€ì **:
  - **ì¥ì **: íƒ€ì… ì•ˆì •ì„±ê³¼ ë„ë©”ì¸ ì˜ë¯¸ ëª…í™•í™”(ì˜ˆ: `String` ëŒ€ì‹  `UserName`). Spring REST APIì—ì„œ DTOë¡œ íŒŒë¼ë¯¸í„° ê°„ì†Œí™”.
  - **í•œê³„**: ë‹¨ìˆœ ë©”ì„œë“œì—ì„œëŠ” ì˜¤ë²„ì—”ì§€ë‹ˆì–´ë§. ê°ì²´ ìƒì„± ë¹„ìš©ì€ ê³ ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­(ì˜ˆ: Spring Batch)ì—ì„œ ë¶€ë‹´.
  - **ì ìš© ê¸°ì¤€**: íŒŒë¼ë¯¸í„° 3ê°œ ì´ìƒì´ê±°ë‚˜ ì—¬ëŸ¬ ë©”ì„œë“œì—ì„œ ë°˜ë³µë˜ë©´ ê°ì²´ë¡œ ë¬¶ìŒ. ê³µí†µ ê²€ì¦ ë¡œì§ì€ `ValidationUtils`ë¡œ ë¶„ë¦¬.
    ```java
    public class ValidationUtils {
        public static boolean isValidName(String value) {
            return value != null && value.matches("[a-zA-Z]+");
        }
    }
    ```
  - **ì‹¤ë¬´ ì‚¬ë¡€**: DDDì—ì„œ Value Object(ì˜ˆ: `Name`, `OrderId`)ë¡œ ë„ë©”ì¸ ëª¨ë¸ ê°•í™”. ìœ ì €/ê·¸ë£¹ ì´ë¦„ ê²€ì¦ ì˜ˆì‹œ:
    ```java
    public record Name(String value) {
        public Name {
            if (value == null || !value.matches("[a-zA-Z]+")) {
                throw new IllegalArgumentException("Invalid name");
            }
        }
    }

    @Service
    public class ValidationService {
        public boolean validateName(Name name) {
            return true; // ê²€ì¦ì€ ìƒì„±ìì—ì„œ ì²˜ë¦¬
        }
    }
    ```
  - **íŒ**: IntelliJì˜ "Extract Parameter Object"ë¡œ ë¦¬íŒ©í† ë§ ì‹œë„, í…ŒìŠ¤íŠ¸ë¡œ ì•ˆì „ì„± ê²€ì¦. íŒ€ ë‚´ DTO ì‚¬ìš© ê¸°ì¤€ì„ ë”°ë¦„.

### ë‹¨ê³„ ìª¼ê°œê¸° (Split Phase)
- **ì„¤ëª…**: ë³µì¡í•œ ë¡œì§ì„ ëª…í™•í•œ ë‹¨ê³„ë¡œ ë¶„ë¦¬í•´ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì¸ë‹¤. ì¤‘ê°„ ë°ì´í„° êµ¬ì¡°ë¥¼ ì‚¬ìš©í•´ ë‹¨ê³„ ê°„ ë°ì´í„° ì „ë‹¬ ëª…í™•í™”.
- **ì˜ˆì œ**:
  ```java
  public class Compiler {
      public String compile(String source) {
          List<String> tokens = tokenize(source); // 1ë‹¨ê³„: í† í°í™”
          SyntaxTree tree = parse(tokens);       // 2ë‹¨ê³„: êµ¬ë¬¸ ë¶„ì„
          return generate(tree);                 // 3ë‹¨ê³„: ì½”ë“œ ìƒì„±
      }

      private List<String> tokenize(String source) { /* í† í°í™” ë¡œì§ */ return List.of(); }
      private SyntaxTree parse(List<String> tokens) { /* íŒŒì‹± ë¡œì§ */ return new SyntaxTree(); }
      private String generate(SyntaxTree tree) { /* ì½”ë“œ ìƒì„± ë¡œì§ */ return ""; }
  }

  record SyntaxTree() {}
  ```
- **ì‹¤ë¬´ ê´€ì **:
  - **ì¥ì **: ë‹¨ê³„ë³„ ë””ë²„ê¹… ìš©ì´, ë³µì¡í•œ ë¡œì§(ì˜ˆ: ë°ì´í„° íŒŒì´í”„ë¼ì¸)ì—ì„œ ìœ ìš©.
  - **í•œê³„**: ì¤‘ê°„ ë°ì´í„° êµ¬ì¡°ì˜ ë³µì¡ì„± ì¦ê°€. ë‹¨ìˆœ ë¡œì§ì—ì„œëŠ” ë¶ˆí•„ìš”í•œ ì¶”ìƒí™”.
  - **ì ìš© ê¸°ì¤€**: ë¡œì§ì´ ì—¬ëŸ¬ ë³€í™˜ ë‹¨ê³„ë¥¼ ê±°ì¹˜ê±°ë‚˜, í…ŒìŠ¤íŠ¸/ë””ë²„ê¹…ì´ ì–´ë ¤ìš´ ê²½ìš° ì ìš©.
  - **ì‹¤ë¬´ ì‚¬ë¡€**: Spring Batchì˜ ETL(Extract-Transform-Load) í”„ë¡œì„¸ìŠ¤ì—ì„œ ë‹¨ê³„ ë¶„ë¦¬.
    ```java
    @Component
    public class DataProcessor {
        public List<ProcessedData> process(List<RawData> rawData) {
            List<ExtractedData> extracted = extract(rawData); // 1ë‹¨ê³„
            return transform(extracted);                      // 2ë‹¨ê³„
        }

        private List<ExtractedData> extract(List<RawData> rawData) { /* ì¶”ì¶œ */ return List.of(); }
        private List<ProcessedData> transform(List<ExtractedData> data) { /* ë³€í™˜ */ return List.of(); }
    }
    ```
  - **íŒ**: ì¤‘ê°„ ë°ì´í„° êµ¬ì¡°ëŠ” `record`ë¡œ ê°„ê²°íˆ ì •ì˜, í…ŒìŠ¤íŠ¸ë¡œ ê° ë‹¨ê³„ ê²€ì¦.

- **í…ŒìŠ¤íŠ¸ ê¸°ë°˜ ì•ˆì •ì„±**: JUnit í…ŒìŠ¤íŠ¸ë¡œ ë¦¬íŒ©í„°ë§ ì „/í›„ ë™ì¼ ë™ì‘ í™•ì¸, ì‘ì€ ìŠ¤í… ì§„í–‰.
- **IDE í™œìš©**: IntelliJ ë‹¨ì¶•í‚¤(Alt+Shift+R)ë¡œ ì‘ì—….
- **ì´ë¦„ ì§“ê¸°**: ì¶”ì¶œëœ í•¨ìˆ˜/ë³€ìˆ˜ì— ì ì ˆí•œ ì´ë¦„ ë¶€ì—¬ë¡œ ê°€ë…ì„±ê³¼ ì˜ë„ ì „ë‹¬.
- **ë³€ìˆ˜ ìº¡ìŠí™”**: ë³µì œë³¸ ë°˜í™˜(Immutable) vs. ì›ë³¸ ì°¸ì¡°, ì„±ëŠ¥ê³¼ ë¶ˆë³€ì„± íŠ¸ë ˆì´ë“œì˜¤í”„.
- **ë§¤ê°œë³€ìˆ˜ ê°ì²´ ë§Œë“¤ê¸°**: íƒ€ì… ì•ˆì •ì„± vs. ë¶ˆí•„ìš”í•œ ë°ì´í„° ì „ë‹¬, ë„ë©”ì¸ íŠ¹í™” vs. ë²”ìš©ì„± íŒë‹¨.
- **ë‹¨ê³„ ìª¼ê°œê¸°**: ì¤‘ê°„ ë°ì´í„° êµ¬ì¡°ì˜ ë³µì¡ì„± ë¬¸ì œ, ì»´íŒŒì¼ëŸ¬ ê°™ì€ ë³µì¡ ë¡œì§ì—ì„œ ìœ ìš©.
- **ë¦¬íŒ©í„°ë§ ê¸°ì¤€**: ë©”ì„œë“œ ë¼ì¸ ìˆ˜ ê°™ì€ ê¸°ê³„ì  ê¸°ì¤€ë³´ë‹¤ ì½”ë“œ ë³€í™” í›„ íŒë‹¨, í…ŒìŠ¤íŠ¸ë¡œ ë¡¤ë°± ê°€ëŠ¥.

## ì‹¤ìŠµ ì˜ˆì œ ê°œìš”
- **ëª©í‘œ**: ì±…ì˜ JavaScript ì˜ˆì œë¥¼ Javaë¡œ ë³€í™˜, JUnit í…ŒìŠ¤íŠ¸ë¡œ ê²€ì¦.
- **ëŒ€ìƒ**: ì†¡ì¥ ê³„ì‚°, ë°ì´í„° ê²€ì¦ ë“± ê°„ë‹¨í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ë¦¬íŒ©í„°ë§ ê¸°ë²• ì ìš©.
- **êµ¬ì„±**:
  - í•¨ìˆ˜ ì¶”ì¶œ: ë³µì¡í•œ ê³„ì‚° ë¡œì§ì„ ë©”ì„œë“œë¡œ ë¶„ë¦¬.
  - ë³€ìˆ˜ ìº¡ìŠí™”: ë‚´ë¶€ ìƒíƒœ ë³´í˜¸, getterë¡œ ë³µì œë³¸ ë°˜í™˜.
  - ë§¤ê°œë³€ìˆ˜ ê°ì²´: ì—°ê´€ íŒŒë¼ë¯¸í„°ë¥¼ DTO/Value Objectë¡œ ë¬¶ìŒ.
  - ë‹¨ê³„ ìª¼ê°œê¸°: ë°ì´í„° ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ì„ ë‹¨ê³„ë³„ë¡œ ë¶„ë¦¬.
- **ì˜ˆì œ ì½”ë“œ**:
  ```java
  // ì†¡ì¥ ê³„ì‚° ë¦¬íŒ©í„°ë§
  public class InvoiceService {
      public BigDecimal calculate(InvoiceParameters params) {
          // ë‹¨ê³„ ìª¼ê°œê¸° ì ìš©
          AmountData amountData = computeAmount(params);
          return adjustAmount(amountData);
      }

      private AmountData computeAmount(InvoiceParameters params) { /* ê³„ì‚° */ return new AmountData(); }
      private BigDecimal adjustAmount(AmountData data) { /* ì¡°ì • */ return BigDecimal.ZERO; }
  }

  record InvoiceParameters(LocalDate startDate, LocalDate endDate, String customerId) {}
  record AmountData() {}
  ```
  
- **í…ŒìŠ¤íŠ¸ í•„ìˆ˜**: JUnitìœ¼ë¡œ ë¦¬íŒ©í„°ë§ ì „/í›„ ë™ì¼ ë™ì‘ ë³´ì¥.
- **ì‘ì€ ìŠ¤í…**: í° ë³€ê²½ ëŒ€ì‹  ì‘ì€ ë‹¨ìœ„ë¡œ ë¦¬íŒ©í„°ë§ í›„ í…ŒìŠ¤íŠ¸.
- **ë„ë©”ì¸ ì¤‘ì‹¬**: ë§¤ê°œë³€ìˆ˜ ê°ì²´ì™€ ìº¡ìŠí™”ëŠ” ë„ë©”ì¸ ì˜ë¯¸ ê°•í™”.
- **ì„±ëŠ¥ ê³ ë ¤**: ë³µì œë³¸ ë°˜í™˜, ê°ì²´ ìƒì„±ì€ JMeter/Gatlingìœ¼ë¡œ ê²€ì¦.
- **íŒ€ ì»¨ë²¤ì…˜**: ë¦¬íŒ©í† ë§ ê¸°ì¤€(DTO ì‚¬ìš©, ë³µì œë³¸ ë°˜í™˜)ì„ íŒ€ ë‚´ í•©ì˜.
- **IDE í™œìš©**: IntelliJì˜ Extract Method, Extract Parameter Objectë¡œ íš¨ìœ¨ì„± ê·¹ëŒ€í™”.


</details>

<details>
<summary><h3>ch7. ìº¡ìŠí™”</h3></summary>

### ì‹œë‚˜ë¦¬ì˜¤

> ê°ì²´ ë‚´ë¶€ì˜ ë°ì´í„°ì™€ êµ¬í˜„ ì„¸ë¶€ ì‚¬í•­ì„ ì™¸ë¶€ë¡œë¶€í„° ìˆ¨ê¸°ê³ , ì •ì˜ëœ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ìƒí˜¸ì‘ìš©í•˜ëŠ” ìº¡ìŠí™” ê¸°ë²•ì„ ë‹¤ë£¬ë‹¤.

- **ëª©í‘œ**: ë°ì´í„°ì™€ ë¡œì§ì„ ìº¡ìŠí™”í•˜ì—¬ ì˜ì¡´ì„±ì„ ì¤„ì´ê³ , ë³€ê²½ì˜ ì˜í–¥ì„ ìµœì†Œí™”í•˜ë©°, ì½”ë“œì˜ ì¼ê´€ì„±ê³¼ ë¬´ê²°ì„± ë³´ì¥.
- **ì£¼ìš” ê¸°ë²•**:
  - ë ˆì½”ë“œ ìº¡ìŠí™”: ë‹¨ìˆœ ë°ì´í„° êµ¬ì¡°ë¥¼ ê°ì²´ë¡œ ê°ì‹¸ ì ‘ê·¼ ì œì–´.
  - ì»¬ë ‰ì…˜ ìº¡ìŠí™”: ì»¬ë ‰ì…˜ ì§ì ‘ ë…¸ì¶œ ëŒ€ì‹  ë©”ì„œë“œë¡œ ê´€ë¦¬.
  - ê¸°ë³¸í˜•ì„ ê°ì²´ë¡œ: ë§¤ì§ ìŠ¤íŠ¸ë§/ë„˜ë²„ë¥¼ ê°’ ê°ì²´ë¡œ ë³€í™˜.
  - ìœ„ì„ ìˆ¨ê¸°ê¸°: ë‚´ë¶€ ê°ì²´ ì°¸ì¡°ë¥¼ ë©”ì„œë“œë¡œ ê°ì¶¤.
  - í´ë˜ìŠ¤ ì¶”ì¶œ/ì¸ë¼ì¸: ë¡œì§ì„ ì ì ˆíˆ ë¶„ë¦¬í•˜ê±°ë‚˜ í†µí•©.

### ë¦¬íŒ©í„°ë§ ê³¼ì •

7ì¥ì€ ìº¡ìŠí™”ë¥¼ í†µí•´ ê°ì²´ì˜ ë‚´ë¶€ ìƒíƒœë¥¼ ë³´í˜¸í•˜ê³ , ì™¸ë¶€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ëª…í™•íˆ í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤. ì±…ì˜ JavaScript ì˜ˆì œë¥¼ Javaë¡œ ë³€í™˜í•˜ë©°, JUnit í…ŒìŠ¤íŠ¸ë¡œ ë¦¬íŒ©í„°ë§ ì „/í›„ ë™ì¼ ë™ì‘ì„ ê²€ì¦í–ˆë‹¤.

#### 1. ë ˆì½”ë“œ ìº¡ìŠí™”

- **ëª©í‘œ**: JSONê³¼ ìœ ì‚¬í•œ ë°ì´í„° êµ¬ì¡°(ë ˆì½”ë“œ)ë¥¼ ê°ì²´ë¡œ ê°ì‹¸ ì ‘ê·¼ ì œì–´.
- **ì˜ˆì œ**:

    ```java
    // ë¦¬íŒ©í„°ë§ ì „: ë§µìœ¼ë¡œ ë°ì´í„° ë…¸ì¶œ
    public class Customer {
        private Map<String, String> data = new HashMap<>();
        public Map<String, String> getData() { return data; }
    }
    
    // ë¦¬íŒ©í„°ë§ í›„: ë ˆì½”ë“œ ìº¡ìŠí™”
    public class Customer {
        private final String name;
        private final String id;
    
        public Customer(String name, String id) {
            this.name = name;
            this.id = id;
        }
    
        public String getName() { return name; }
        public String getId() { return id; }
    }
    ```

- **íš¨ê³¼**: ë°ì´í„° ì ‘ê·¼ì„ getterë¡œ ì œí•œ, ë‚´ë¶€ êµ¬ì¡° ë³€ê²½ ì‹œ ì™¸ë¶€ ì˜í–¥ ìµœì†Œí™”.
- **í…ŒìŠ¤íŠ¸**:

    ```java
    @Test
    void testCustomerEncapsulation() {
        Customer customer = new Customer("BigCo", "123");
        assertEquals("BigCo", customer.getName());
        assertEquals("123", customer.getId());
    }
    ```


#### 2. ì»¬ë ‰ì…˜ ìº¡ìŠí™”

- **ëª©í‘œ**: ì»¬ë ‰ì…˜ ì§ì ‘ ë…¸ì¶œ ëŒ€ì‹  ë©”ì„œë“œë¡œ ì¶”ê°€/ì‚­ì œ ê´€ë¦¬, ë¶ˆë³€ì„± ë³´ì¥.
- **ì˜ˆì œ**:

    ```java
    // ë¦¬íŒ©í„°ë§ ì „: ì»¬ë ‰ì…˜ ì§ì ‘ ë…¸ì¶œ
    public class Order {
        private List<String> items = new ArrayList<>();
        public List<String> getItems() { return items; }
    }
    
    // ë¦¬íŒ©í„°ë§ í›„: ì»¬ë ‰ì…˜ ìº¡ìŠí™”
    public class Order {
        private final List<String> items = new ArrayList<>();
    
        public List<String> getItems() {
            return Collections.unmodifiableList(items); 
        }
    
        public void addItem(String item) {
            items.add(item);
        }
    
        public void removeItem(String item) {
            items.remove(item);
        }
    }
    ```

- **íš¨ê³¼**: ì™¸ë¶€ì—ì„œ ì»¬ë ‰ì…˜ ìˆ˜ì • ë¶ˆê°€, ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥.
- **í…ŒìŠ¤íŠ¸**:

    ```java
    @Test
    void testCollectionEncapsulation() {
        Order order = new Order();
        order.addItem("item1");
        assertEquals(List.of("item1"), order.getItems());
        assertThrows(UnsupportedOperationException.class, () -> order.getItems().add("item2"));
    }
    ```

- **ì‹¤ë¬´ íŒ**: `Collections.unmodifiableList()` ì‚¬ìš©ìœ¼ë¡œ ê°„ë‹¨íˆ ë¶ˆë³€ì„± ë³´ì¥. ëŒ€ìš©ëŸ‰ ë°ì´í„°ëŠ” ë³µì‚¬ë³¸ ë°˜í™˜ ëŒ€ì‹  í”„ë¡ì‹œ ê³ ë ¤.

#### 3. ê¸°ë³¸í˜•ì„ ê°ì²´ë¡œ ë°”ê¾¸ê¸°

- **ëª©í‘œ**: ë§¤ì§ ìŠ¤íŠ¸ë§/ë„˜ë²„ë¥¼ ê°’ ê°ì²´ë¡œ ë³€í™˜í•´ ê°€ë…ì„±ê³¼ íƒ€ì… ì•ˆì •ì„± ê°•í™”.
- **ì˜ˆì œ**:

    ```java
    // ë¦¬íŒ©í„°ë§ ì „: ë§¤ì§ ìŠ¤íŠ¸ë§ ì‚¬ìš©
    public class Play {
        private String type; // "tragedy", "comedy"
        public String getType() { return type; }
    }
    
    // ë¦¬íŒ©í„°ë§ í›„: Enum ì‚¬ìš©
    public enum PlayType {
        TRAGEDY, COMEDY
    }
    
    public class Play {
        private final PlayType type;
    
        public Play(PlayType type) {
            this.type = type;
        }
    
        public PlayType getType() { return type; }
    }
    ```

- **íš¨ê³¼**: ì»´íŒŒì¼ íƒ€ì„ ì˜¤ë¥˜ ê°ì§€, ì½”ë“œ ê°€ë…ì„± í–¥ìƒ.
- **í…ŒìŠ¤íŠ¸**:

    ```java
    @Test
    void testPlayType() {
        Play play = new Play(PlayType.TRAGEDY);
        assertEquals(PlayType.TRAGEDY, play.getType());
    }
    ```


#### 4. ë‚´ë¶€ ê°ì²´ ì°¸ì¡° ê°ì¶”ê¸°

- **ëª©í‘œ**: ë‚´ë¶€ ê°ì²´ ì°¸ì¡°ë¥¼ ë…¸ì¶œí•˜ì§€ ì•Šê³  ë©”ì„œë“œë¡œ ê°ì¶° ì˜ì¡´ì„± ê´€ë¦¬.
- **ì˜ˆì œ**:

    ```java
    // ë¦¬íŒ©í„°ë§ ì „: ë‚´ë¶€ ê°ì²´ ë…¸ì¶œ
    public class Person {
        private Department department;
        public Department getDepartment() { return department; }
    }
    
    // ë¦¬íŒ©í„°ë§ í›„: ë‚´ë¶€ ê°ì²´ ì°¸ì¡° ê°ì¶”ê¸°
    public class Person {
        private final Department department;
    
        public Person(Department department) {
            this.department = department;
        }
    
        public String getManager() {
            return department.getManager();
        }
    }
    
    public class Department {
        private final String manager;
        public Department(String manager) { this.manager = manager; }
        public String getManager() { return manager; }
    }
    ```

- **íš¨ê³¼**: ë‚´ë¶€ êµ¬ì¡° ë³€ê²½ ì‹œ ì™¸ë¶€ ì˜í–¥ ìµœì†Œí™”, ì˜ì¡´ì„± ê°ì†Œ.
- **í…ŒìŠ¤íŠ¸**:

    ```java
    @Test
    void testDelegationHiding() {
        Department dept = new Department("John");
        Person person = new Person(dept);
        assertEquals("John", person.getManager());
    }
    ```

- **ì‹¤ë¬´ íŒ**: ê³¼ë„í•œ ìœ„ì„ì€ ì¤‘ê³„ì ì—­í•  ì¦ê°€ë¡œ ë³µì¡ì„± ìœ ë°œ. ì¤‘ê³„ì ì œê±°ì™€ ê· í˜• í•„ìš”.

### ì‹¤ë¬´ ê´€ì 

- **ìº¡ìŠí™”ì˜ ì¥ì **:
  - ê°ì²´ ê°„ ì˜ì¡´ì„± ê°ì†Œ, ë³€ê²½ ì˜í–¥ ìµœì†Œí™”.
  - ì»¬ë ‰ì…˜ ìº¡ìŠí™”ë¡œ ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥.
  - ê°’ ê°ì²´ë¡œ ì½”ë“œ ê°€ë…ì„±ê³¼ ì•ˆì •ì„± ê°•í™”.
- **ì‹¤ë¬´ í•œê³„**:
  - ë¬´ìƒíƒœ ì„œë¹„ìŠ¤(ì˜ˆ: Spring REST API)ì—ì„œëŠ” ìº¡ìŠí™” ì ìš© ì œí•œ.
  - ë³µì œë³¸ ë°˜í™˜ì€ ì„±ëŠ¥ ë¬¸ì œ ìœ ë°œ ê°€ëŠ¥, JMeterë¡œ ê²€ì¦ ê¶Œì¥.
  - ìë°”ìŠ¤í¬ë¦½íŠ¸ ì˜ˆì œëŠ” ìë°” í™˜ê²½ì—ì„œ ì§ê´€ì ì´ì§€ ì•Šì„ ìˆ˜ ìˆìŒ.
- **ì ìš© ê¸°ì¤€**:
  - ì»¬ë ‰ì…˜ ë°˜í™˜ ì‹œ `Collections.unmodifiableList()` ê¸°ë³¸ ì ìš©.
  - DTO/ê°’ ê°ì²´ë¡œ ë„ë©”ì¸ ì˜ë¯¸ ê°•í™”, 3ê°œ ì´ìƒ íŒŒë¼ë¯¸í„°ëŠ” ê°ì²´ë¡œ ë¬¶ìŒ.
  - ìœ„ì„ ìˆ¨ê¸°ê¸°ëŠ” ë‚´ë¶€ êµ¬ì¡° ë³€ê²½ ë¹ˆë„ ë†’ì€ ê²½ìš° ìœ ë¦¬.
- **íŒ€ ì»¨ë²¤ì…˜**:
  - ë¶ˆë³€ì„± ì²˜ë¦¬(ë³µì œë³¸ vs. í”„ë¡ì‹œ) ê¸°ì¤€ ëª…í™•í™”.
  - ë¦¬íŒ©í„°ë§ í›„ í…ŒìŠ¤íŠ¸ë¡œ ë¡¤ë°± ê°€ëŠ¥ì„± í™•ë³´.
- **IDE í™œìš©**: IntelliJì˜ "Encapsulate Fields", "Extract Class"ë¡œ ì‘ì—… íš¨ìœ¨í™”.

### í…ŒìŠ¤íŠ¸ ê¸°ë°˜ ì•ˆì •ì„±

- JUnitìœ¼ë¡œ ë¦¬íŒ©í„°ë§ ì „/í›„ ë™ì¼ ë™ì‘ ê²€ì¦.
- ê²½ê³„ ì¡°ê±´(ë¹ˆ ì»¬ë ‰ì…˜, ì˜ëª»ëœ ì…ë ¥) í…ŒìŠ¤íŠ¸ë¡œ ì•ˆì •ì„± ê°•í™”.
- `@RefactoringStage` ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ ë‹¨ê³„ë³„ ê²°ê³¼ ë¹„êµ.

### ì‹¤í–‰ ê²°ê³¼ ì˜ˆì‹œ

```bash
> Task :test
=== Refactoring Step: "RecordEncapsulation" Test Start ===
Customer name: BigCo, ID: 123
ì‹¤í–‰ ì‹œê°„: 10ms
=== Refactoring Step: "CollectionEncapsulation" Test Start ===
Order items: [item1]
UnsupportedOperationException: Cannot modify immutable list
ì‹¤í–‰ ì‹œê°„: 8ms
=== Refactoring Step: "PrimitiveToObject" Test Start ===
Play type: TRAGEDY
ì‹¤í–‰ ì‹œê°„: 5ms
=== Refactoring Step: "HideDelegation" Test Start ===
Manager: John
ì‹¤í–‰ ì‹œê°„: 6ms
BUILD SUCCESSFUL in 1s
```


</details>